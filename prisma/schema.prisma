generator client {
    provider = "prisma-client"
    output   = "../app/generated/prisma"
}

datasource db {
    provider = "postgresql"
}

model ConfigGeral {
    id           String @id @default(uuid())
    priceBaskets Int

    active Boolean  @default(true)
    date   DateTime @db.Date

    @@unique([date])
}

model GC {
    id                 String               @id @default(uuid())
    name               String               @unique
    avatar             String?
    type               String
    tribo              String
    quantity           Int
    applicationsDailys ApplicationsDailys[]
    applicationsFixeds ApplicationsFixed[]
}

model ApplicationsDailys {
    id             String   @id @default(uuid())
    gcId           String
    date           DateTime @db.Date
    type           String
    members        Int
    visitors       Int
    membersServing Int?

    gc GC @relation(fields: [gcId], references: [id], onDelete: Cascade)

    @@unique([gcId, date])
    @@index([gcId])
}

model ApplicationsFixed {
    id   String   @id @default(uuid())
    gcId String
    date DateTime @db.Date

    amountCollected Int
    vouchers        VoucherBaskets[]

    gc GC @relation(fields: [gcId], references: [id], onDelete: Cascade)

    @@unique([gcId, date])
    @@index([gcId])
}

model VoucherBaskets {
    id                  String @id @default(uuid())
    applicationsFixedId String

    voucher String
    price    Int?

    applicationsFixed ApplicationsFixed @relation(fields: [applicationsFixedId], references: [id], onDelete: Cascade)
}
